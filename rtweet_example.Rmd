---
title: "rtweet_example"
author: "Steven Cognac"
date: '2022-05-05'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(rtweet)
library(readr)
library(httpuv)
get_token()
# source(here("tokens/create_token.R"))
```

Simply send a request to Twitter's API (with a function like `search_tweets()`, `get_timeline()`, `get_followers()`, `get_favorites()`, etc.) during an interactive session of R, authorize the embedded `rstats2twitter` app.

Helpful Links to use `rtweet` package

-   Tutorial from [The Twitter API in R](https://dgarcia-eu.github.io/SocialDataScience/2_SocialDynamics/027_rtweet/rtweet.html)
-   [Practice getting data from the Twitter API](https://cfss.uchicago.edu/notes/twitter-api-practice/)
-   [Intro to rtweet: Collecting Twitter Data](https://cran.r-project.org/web/packages/rtweet/vignettes/intro.html)
-   [Mapping Twitter Data](https://crd230.github.io/lab4b.html#Extracting_Tweet_Geographic_Coordinates)

```{r}
## authenticate via web browser
token <- create_token(
  app = "eds231_tfire",
  consumer_key = api_key,
  consumer_secret = api_secret_key)
```

```{r}
tfire_tweets <- search_tweets(q="thomasfire", n = 80,
                               include_rts = FALSE, lang = "en",
                             geocode = lookup_coords("usa"))
```

```{r}
## view token
token
```

```{r}
get_token()
```

# Initalize

```{r}
# one-time setup to access the Twitter REST API and streaming API
result <- lookup_users("Cognack_")
```

```{r}
glimpse(result)
```

```{r}
tfire <- search_tweets(
  q = "#ThomasFire",
  n = 10,
  include_rts = FALSE
)
tfire
```

# Lookup timeline of a Twitter user

```{r}
glimpse(get_timeline(user="allison_horst", n=10))

```

```{r}
# setting up twitter token as a Developer
vignette("auth", package = "rtweet")
```
